dimension supplier {
    supplier: s_suppkey PK
    supplier: s_name as name
    supplier: s_phone as phone
    supplier: s_address as address
    nation: n_name as nation
    region: r_name as region
}

dimension part {
    part: p_partkey PK
    part: p_name as name
    part: p_brand as brand
    part: p_size
}

dimension order_date {
    orders: o_orderdate PK
    self:week_day(o_date) str as day
    self:month_str(o_date) str as month
}

fact lineitem {
    self: linenumber PK serial
    lineitem: l_partkey FK to part.p_partkey as partkey
    lineitem: l_suppkey FK to supplier.s_suppkey as supplierkey
    orders: o_orderdate FK to order_date.o_orderdate as order_date
    lineitem: sum(l_extendedprice) as totalpayment
    lineitem: sum(l_quantity) as totalquantity
    lineitem: sum(l_extendedprice) - (lineitem: sum(l_quantity) * partsupp:ps_supplycost) - (lineitem: sum(l_quantity) * part:p_retailprice) numeric as earnings
}