dimension supplier {
    supplier: s_suppkey PK as suppkey
    supplier: s_name as name
    supplier: s_phone as phone
    supplier: s_address as address
    nation: n_name as nation
    region: r_name as region 1
}

dimension part {
    part: p_partkey PK
    part: p_name as name
    part: p_brand as brand
    part: p_size
    part: p_retailprice
}

dimension order_date {
    orders: o_orderdate PK as o_date
    orders:week_day(o_orderdate) str as day
    orders:month_str(o_orderdate) str as month 1
}

fact lineitem {
    self: linenumber PK serial as lnumber
    lineitem: l_partkey FK to part.p_partkey as partkey
    lineitem: l_suppkey FK to supplier.suppkey as supplierkey
    orders: o_orderdate FK to order_date.o_date as order_date
    lineitem: sum(l_payment) as totalpayment
    lineitem: sum(l_quantity) as totalquantity
    lineitem: sum(l_payment) - (lineitem: sum(l_quantity) * partsupp:ps_supplycost) - (lineitem: sum(l_quantity) * part:p_retailprice) numeric as earnings
}