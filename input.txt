dimension tienda {
tienda: idtienda PK
tienda:nombre
reparto:nombre as reparto
municipio:nombre as municipio
provincia:nombre as provincia
}

dimension producto {
producto:idproducto PK
marca:nombre as marca
categoria:nombre as categoria
tipopaquete:nombre as paquete
departamento:nombre as departamento
departamento:descripcion as descripcion
producto:nombre as producto
producto:precio
producto:costo
}

dimension fecha {
venta:fecha PK
self:week_day(fecha) str as Dia
self:month_str(fecha) str as Mes
}

fact venta {
venta:idventa PK
producto:idproducto FK to producto.idproducto 
tienda:idtienda FK to tienda.idtienda
venta:fecha FK to fecha.fecha
venta:sum(cantidad_vendida) groupby venta:idproducto as cantidad_vendida_total
venta:sum(pago) groupby venta:idproducto as importe_total
producto:Costo * venta:sum(cantidad_vendida) groupby venta:idproducto int as coste_total
venta:sum(pago) groupby venta:idproducto - producto:Costo * venta:sum(cantidad_vendida) groupby venta:idproducto int as ganancia 
}
